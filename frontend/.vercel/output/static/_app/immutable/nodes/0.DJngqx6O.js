import{d as aa,e as ea,a as n,f as v,s as q,c as sa}from"../chunks/DrEVJf_X.js";import{o as ta}from"../chunks/CY6dNTIf.js";import{f as ra,ah as la,a0 as oa,a2 as ia,am as na,a4 as a,a3 as l,a7 as e,a9 as I,b as B,a8 as ha,g as K,a1 as k,aa as F}from"../chunks/BIQOLOFU.js";import{B as va,i as y}from"../chunks/NPzolRrf.js";import{s as ca}from"../chunks/CDiOZD_h.js";import{i as da,g as fa,b as pa,a as ua,c as ga}from"../chunks/D6zz_Kj-.js";import{i as ma}from"../chunks/DJgaem7h.js";function ya(b,_,...s){var h=new va(b);ra(()=>{const p=_()??null;h.ensure(p,p&&(M=>p(M,...s)))},la)}var _a=v('<img alt="" class="user-avatar svelte-12qhfyh"/>'),wa=v('<span class="user-avatar-placeholder svelte-12qhfyh"> </span>'),qa=v('<div class="dropdown-divider svelte-12qhfyh"></div> <a href="/admin/users" class="dropdown-item svelte-12qhfyh"><svg viewBox="0 0 20 20" width="16" height="16" class="svelte-12qhfyh"><path fill="currentColor" d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path></svg> Manage Users</a>',1),ka=v('<div class="user-dropdown svelte-12qhfyh" role="menu" tabindex="0" aria-label="User menu"><div class="dropdown-header svelte-12qhfyh"><span class="dropdown-email svelte-12qhfyh"> </span> <span class="dropdown-role svelte-12qhfyh"> </span></div> <div class="dropdown-divider svelte-12qhfyh"></div> <a href="/profile" class="dropdown-item svelte-12qhfyh"><svg viewBox="0 0 20 20" width="16" height="16" class="svelte-12qhfyh"><path fill="currentColor" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"></path></svg> Profile</a> <a href="/api-keys" class="dropdown-item svelte-12qhfyh"><svg viewBox="0 0 20 20" width="16" height="16" class="svelte-12qhfyh"><path fill="currentColor" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"></path></svg> API Keys</a> <a href="/settings" class="dropdown-item svelte-12qhfyh"><svg viewBox="0 0 20 20" width="16" height="16" class="svelte-12qhfyh"><path fill="currentColor" d="M10 2a1 1 0 011 1v1.07a7.001 7.001 0 014.243 4.243H17a1 1 0 110 2h-1.07a7.001 7.001 0 01-4.243 4.243V17a1 1 0 11-2 0v-1.07a7.001 7.001 0 01-4.243-4.243H3a1 1 0 110-2h1.07a7.001 7.001 0 014.243-4.243V3a1 1 0 011-1zm0 3a5 5 0 100 10A5 5 0 0010 5z"></path></svg> Settings</a> <!> <div class="dropdown-divider svelte-12qhfyh"></div> <button class="dropdown-item logout svelte-12qhfyh"><svg viewBox="0 0 20 20" width="16" height="16" class="svelte-12qhfyh"><path fill="currentColor" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z"></path></svg> Sign Out</button></div>'),ba=v('<div class="user-menu-container svelte-12qhfyh"><button class="user-button svelte-12qhfyh"><!> <span class="user-name svelte-12qhfyh"> </span> <svg class="dropdown-icon svelte-12qhfyh" viewBox="0 0 20 20" width="16" height="16"><path fill="currentColor" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"></path></svg></button> <!></div>'),Ma=v('<a href="/auth/login" class="sign-in-button svelte-12qhfyh">Sign In</a>'),xa=v('<div class="layout svelte-12qhfyh"><header class="header svelte-12qhfyh"><div class="container header-inner svelte-12qhfyh"><a href="/" class="logo svelte-12qhfyh"><img src="/SVRLogo.png" alt="Logo" class="logo-icon svelte-12qhfyh" style="width: 1.5em; height: 1.5em; vertical-align: middle;"/> <span class="logo-text">Resilience Hub</span></a> <h1 class="site-heading" style="margin: 0 2rem; font-size: 1.5rem; font-weight: 700; color: var(--primary, #2563eb); text-align: center;">Batlow Community Knowledge Base</h1> <nav class="nav svelte-12qhfyh"><a href="/" class="nav-link svelte-12qhfyh">Query</a> <a href="/knowledge" class="nav-link svelte-12qhfyh">Knowledge</a> <a href="/knowledge-graph" class="nav-link svelte-12qhfyh">Graph</a> <a href="/documents" class="nav-link svelte-12qhfyh">Documents</a> <a href="/events" class="nav-link svelte-12qhfyh">Events</a> <a href="/assets" class="nav-link svelte-12qhfyh">Assets</a> <!></nav></div></header> <main class="main svelte-12qhfyh"><!></main> <footer class="footer svelte-12qhfyh"><div class="container"><p>Community Resilience Reasoning Model MVP</p></div></footer></div>');function Pa(b,_){oa(_,!0);const s=fa();let h=ha(!1);ta(()=>{da(),ma()});async function p(){const o=pa();if(o)try{await ua.auth.logout(o)}catch{}ga(),B(h,!1),window.location.href="/auth/login"}function M(){B(h,!K(h))}function c(){B(h,!1)}var x=xa();ea("click",na,c);var z=a(x),C=a(z),R=l(a(C),4),N=l(a(R),12);{var D=o=>{var d=ba(),f=a(d);f.__click=t=>{t.stopPropagation(),M()};var w=a(f);{var u=t=>{var r=_a();k(()=>ca(r,"src",s.user.avatar_url)),n(t,r)},A=t=>{var r=wa(),g=a(r,!0);e(r),k(m=>q(g,m),[()=>s.user.name.charAt(0).toUpperCase()]),n(t,r)};y(w,t=>{s.user.avatar_url?t(u):t(A,!1)})}var H=l(w,2),Q=a(H,!0);e(H),I(2),e(f);var j=l(f,2);{var J=t=>{var r=ka();r.__click=i=>i.stopPropagation(),r.__keydown=i=>{(i.key==="Escape"||i.key==="Esc")&&c()};var g=a(r),m=a(g),W=a(m,!0);e(m);var P=l(m,2),X=a(P,!0);e(P),e(g);var S=l(g,4);S.__click=c;var T=l(S,2);T.__click=c;var U=l(T,2);U.__click=c;var L=l(U,2);{var Y=i=>{var V=qa(),$=l(F(V),2);$.__click=c,n(i,V)};y(L,i=>{s.isAdmin&&i(Y)})}var Z=l(L,4);Z.__click=p,e(r),k(()=>{q(W,s.user.email),q(X,s.user.role)}),n(t,r)};y(j,t=>{K(h)&&t(J)})}e(d),k(()=>q(Q,s.user.name)),n(o,d)},G=o=>{var d=sa(),f=F(d);{var w=u=>{var A=Ma();n(u,A)};y(f,u=>{s.isInitialized&&u(w)},!0)}n(o,d)};y(N,o=>{s.isAuthenticated&&s.user?o(D):o(G,!1)})}e(R),e(C),e(z);var E=l(z,2),O=a(E);ya(O,()=>_.children),e(E),I(2),e(x),n(b,x),ia()}aa(["click","keydown"]);export{Pa as component};
