import{d as we,a as d,f as _,s as g,e as Ee,c as Se}from"../chunks/DrEVJf_X.js";import{o as Re}from"../chunks/CY6dNTIf.js";import{a0 as Ce,a8 as f,ab as De,b as s,g as a,a1 as D,a2 as Fe,e as $e,a3 as e,a5 as ke,a4 as o,a7 as t,a9 as ie,a6 as Be,aa as Te}from"../chunks/BIQOLOFU.js";import{i as E}from"../chunks/NPzolRrf.js";import{e as Le,i as Me}from"../chunks/BPKzcg-U.js";import{h as Ne}from"../chunks/82X_sTQh.js";import{r as ve}from"../chunks/CDiOZD_h.js";import{s as le}from"../chunks/DrIL6A14.js";import{b as X}from"../chunks/COIuQCY0.js";import{b as ne}from"../chunks/D8D42rjB.js";import{a as de}from"../chunks/D6zz_Kj-.js";var Oe=_('<div class="alert alert-error"> </div>'),He=_('<div class="card form-card svelte-13hsgdq"><h2 class="svelte-13hsgdq">Report New Event</h2> <form><div class="form-row svelte-13hsgdq"><div class="form-group svelte-13hsgdq"><label class="label" for="eventType">Event Type *</label> <select id="eventType" class="input svelte-13hsgdq" required><option>Select type...</option><option>Flood</option><option>Road Closure</option><option>Power Outage</option><option>Evacuation</option><option>Rescue Needed</option><option>Shelter Update</option><option>Other</option></select></div> <div class="form-group svelte-13hsgdq"><label class="label" for="severity">Severity (1-5)</label> <select id="severity" class="input svelte-13hsgdq"><option>Select severity...</option><option>1 - Minor</option><option>2 - Low</option><option>3 - Moderate</option><option>4 - High</option><option>5 - Critical</option></select></div></div> <div class="form-group svelte-13hsgdq"><label class="label" for="description">Description *</label> <textarea id="description" class="textarea" required placeholder="Describe the situation..."></textarea></div> <div class="form-row svelte-13hsgdq"><div class="form-group svelte-13hsgdq"><label class="label" for="location">Location</label> <input id="location" class="input" placeholder="Where is this happening?"/></div> <div class="form-group svelte-13hsgdq"><label class="label" for="reportedBy">Reported By</label> <input id="reportedBy" class="input" placeholder="Your name (optional)"/></div></div> <div class="form-actions svelte-13hsgdq"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary">Submit Report</button></div></form></div>'),Pe=_('<div class="loading"><div class="spinner"></div></div>'),Ue=_('<div class="card empty-state svelte-13hsgdq"><p>No events reported yet.</p></div>'),We=_("<span> </span>"),Ye=_("<span> </span>"),je=_("<span> </span>"),ze=_('<div><div class="event-header svelte-13hsgdq"><span class="event-type svelte-13hsgdq"> </span> <!></div> <p class="event-description svelte-13hsgdq"> </p> <div class="event-meta svelte-13hsgdq"><!> <span> </span> <!></div></div>'),Ae=_('<div class="events-list svelte-13hsgdq"></div>'),Ge=_('<div class="container"><div class="page-header svelte-13hsgdq"><div class="header-row svelte-13hsgdq"><h1 class="svelte-13hsgdq">Community Events</h1> <button class="btn btn-primary"> </button></div> <p class="svelte-13hsgdq">Real-time reports from the community during emergencies.</p></div> <!> <!> <!></div>');function oa(pe,ce){Ce(ce,!0);let G=f(De([])),I=f(!0),S=f(""),F=f(!1),O=f(""),H=f(""),P=f(""),U=f(null),W=f("");Re(async()=>{await Z()});async function Z(){s(I,!0),s(S,"");try{s(G,await de.getEvents(),!0)}catch(r){s(S,r instanceof Error?r.message:"Failed to load events",!0)}finally{s(I,!1)}}function J(){s(O,""),s(H,""),s(P,""),s(U,null),s(W,""),s(F,!1)}async function _e(r){r.preventDefault(),s(S,"");try{await de.createEvent({event_type:a(O),description:a(H),location:a(P)||null,severity:a(U),reported_by:a(W)||null}),J(),await Z()}catch(n){s(S,n instanceof Error?n.message:"Failed to create event",!0)}}function ue(r){return r?r>=4?"severity-high":r>=2?"severity-medium":"severity-low":""}function me(r){return new Date(r).toLocaleString()}var K=Ge();Ne("13hsgdq",r=>{$e(()=>{ke.title="Events - Community Resilience"})});var Q=o(K),ee=o(Q),V=e(o(ee),2);V.__click=()=>{J(),s(F,!a(F))};var fe=o(V,!0);t(V),t(ee),ie(2),t(Q);var ae=e(Q,2);{var he=r=>{var n=Oe(),b=o(n,!0);t(n),D(()=>g(b,a(S))),d(r,n)};E(ae,r=>{a(S)&&r(he)})}var te=e(ae,2);{var ge=r=>{var n=He(),b=e(o(n),2),$=o(b),k=o($),p=e(o(k),2),u=o(p);u.value=u.__value="";var B=e(u);B.value=B.__value="flood";var l=e(B);l.value=l.__value="road_closure";var h=e(l);h.value=h.__value="power_outage";var y=e(h);y.value=y.__value="evacuation";var q=e(y);q.value=q.__value="rescue";var T=e(q);T.value=T.__value="shelter";var Y=e(T);Y.value=Y.__value="other",t(p),t(k);var j=e(k,2),x=e(o(j),2),L=o(x);L.value=(L.__value=null)??"";var R=e(L);R.value=R.__value=1;var C=e(R);C.value=C.__value=2;var M=e(C);M.value=M.__value=3;var w=e(M);w.value=w.__value=4;var z=e(w);z.value=z.__value=5,t(x),t(j),t($);var N=e($,2),A=e(o(N),2);Be(A),t(N);var v=e(N,2),i=o(v),c=e(o(i),2);ve(c),t(i);var re=e(i,2),oe=e(o(re),2);ve(oe),t(re),t(v);var se=e(v,2),xe=o(se);xe.__click=J,ie(2),t(se),t(b),t(n),Ee("submit",b,_e),ne(p,()=>a(O),m=>s(O,m)),ne(x,()=>a(U),m=>s(U,m)),X(A,()=>a(H),m=>s(H,m)),X(c,()=>a(P),m=>s(P,m)),X(oe,()=>a(W),m=>s(W,m)),d(r,n)};E(te,r=>{a(F)&&r(ge)})}var be=e(te,2);{var ye=r=>{var n=Pe();d(r,n)},qe=r=>{var n=Se(),b=Te(n);{var $=p=>{var u=Ue();d(p,u)},k=p=>{var u=Ae();Le(u,21,()=>a(G),Me,(B,l)=>{var h=ze(),y=o(h),q=o(y),T=o(q,!0);t(q);var Y=e(q,2);{var j=v=>{var i=We(),c=o(i);t(i),D(()=>{le(i,1,`badge ${a(l).severity>=4?"badge-danger":a(l).severity>=2?"badge-warning":"badge-primary"}`),g(c,`Severity: ${a(l).severity??""}`)}),d(v,i)};E(Y,v=>{a(l).severity&&v(j)})}t(y);var x=e(y,2),L=o(x,!0);t(x);var R=e(x,2),C=o(R);{var M=v=>{var i=Ye(),c=o(i);t(i),D(()=>g(c,`ðŸ“ ${a(l).location??""}`)),d(v,i)};E(C,v=>{a(l).location&&v(M)})}var w=e(C,2),z=o(w);t(w);var N=e(w,2);{var A=v=>{var i=je(),c=o(i);t(i),D(()=>g(c,`ðŸ‘¤ ${a(l).reported_by??""}`)),d(v,i)};E(N,v=>{a(l).reported_by&&v(A)})}t(R),t(h),D((v,i,c)=>{le(h,1,`card event-card ${v??""}`,"svelte-13hsgdq"),g(T,i),g(L,a(l).description),g(z,`ðŸ• ${c??""}`)},[()=>ue(a(l).severity),()=>a(l).event_type.replace("_"," "),()=>me(a(l).timestamp)]),d(B,h)}),t(u),d(p,u)};E(b,p=>{a(G).length===0?p($):p(k,!1)},!0)}d(r,n)};E(be,r=>{a(I)?r(ye):r(qe,!1)})}t(K),D(()=>g(fe,a(F)?"Cancel":"Report Event")),d(pe,K),Fe()}we(["click"]);export{oa as component};
