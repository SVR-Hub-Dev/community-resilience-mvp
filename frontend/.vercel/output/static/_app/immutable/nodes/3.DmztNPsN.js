import{a as c,f as d,c as Ta}from"../chunks/deXkMWSk.js";import{o as ka}from"../chunks/BKIXhqgW.js";import{z as qa,K as _,P as Da,J as o,B as a,A as y,C as Na,e as Ea,D as e,$ as $a,F as s,I as t,M as pa,G as Ba,O as Ha}from"../chunks/xmsiYLBb.js";import{d as Ia,s as f,e as La}from"../chunks/BjJ1wdql.js";import{i as h}from"../chunks/Iv35OxqL.js";import{h as Ma,a as da,b as z,e as ua,i as _a}from"../chunks/BqvhUv_W.js";import{r as aa}from"../chunks/Dye65HWv.js";import{s as Oa}from"../chunks/CvX7yBP0.js";import{b as ma}from"../chunks/dZlrZmzD.js";var Ra=d('<div class="alert alert-error"> </div>'),Ua=d('<div class="card form-card svelte-9662h2"><h2 class="svelte-9662h2">Add New Asset</h2> <form><div class="form-row svelte-9662h2"><div class="form-group svelte-9662h2"><label class="label" for="name">Name *</label> <input id="name" class="input" required placeholder="e.g., Hilltop Community Hall"/></div> <div class="form-group svelte-9662h2"><label class="label" for="assetType">Asset Type *</label> <select id="assetType" class="input svelte-9662h2" required><option>Select type...</option><option>Shelter</option><option>Vehicle</option><option>Equipment</option><option>Supplies</option><option>Facility</option><option>Other</option></select></div></div> <div class="form-group svelte-9662h2"><label class="label" for="description">Description</label> <textarea id="description" class="textarea" placeholder="Describe the asset, capabilities, access information..."></textarea></div> <div class="form-row svelte-9662h2"><div class="form-group svelte-9662h2"><label class="label" for="location">Location</label> <input id="location" class="input" placeholder="Address or area"/></div> <div class="form-group svelte-9662h2"><label class="label" for="capacity">Capacity</label> <input id="capacity" class="input" type="number" placeholder="Number of people/items"/></div></div> <div class="form-row svelte-9662h2"><div class="form-group svelte-9662h2"><label class="label" for="status">Status</label> <select id="status" class="input svelte-9662h2"><option>Select status...</option><option>Available</option><option>In Use</option><option>Unavailable</option></select></div> <div class="form-group svelte-9662h2"><label class="label" for="tags">Tags (comma-separated)</label> <input id="tags" class="input" placeholder="generator, accessible, medical"/></div></div> <div class="form-actions svelte-9662h2"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary">Add Asset</button></div></form></div>'),za=d('<div class="loading"><div class="spinner"></div></div>'),Ga=d('<div class="card empty-state svelte-9662h2"><p>No community assets registered yet.</p></div>'),Ja=d("<span> </span>"),Ka=d('<p class="asset-description svelte-9662h2"> </p>'),Pa=d("<span> </span>"),Va=d("<span> </span>"),ja=d('<span class="badge badge-primary"> </span>'),Qa=d('<div class="asset-tags svelte-9662h2"></div>'),Wa=d('<div class="card asset-card svelte-9662h2"><div class="asset-header svelte-9662h2"><h3 class="svelte-9662h2"> </h3> <!></div> <span class="asset-type svelte-9662h2"> </span> <!> <div class="asset-meta svelte-9662h2"><!> <!></div> <!></div>'),Xa=d('<div class="assets-grid svelte-9662h2"></div>'),Ya=d('<div class="container"><div class="page-header svelte-9662h2"><div class="header-row svelte-9662h2"><h1 class="svelte-9662h2">Community Assets</h1> <button class="btn btn-primary"> </button></div> <p class="svelte-9662h2">Resources and facilities available during emergencies.</p></div> <!> <!> <!></div>');function ve(fa,ha){qa(ha,!0);let ea=_(Da([])),ta=_(!0),F=_(""),D=_(!1),G=_(""),J=_(""),K=_(""),P=_(""),V=_(null),j=_(""),Q=_("");ka(async()=>{await oa()});async function oa(){o(ta,!0),o(F,"");try{o(ea,await da.getAssets(),!0)}catch(i){o(F,i instanceof Error?i.message:"Failed to load assets",!0)}finally{o(ta,!1)}}function sa(){o(G,""),o(J,""),o(K,""),o(P,""),o(V,null),o(j,""),o(Q,""),o(D,!1)}async function ba(i){i.preventDefault(),o(F,"");try{await da.createAsset({name:a(G),asset_type:a(J),description:a(K)||null,location:a(P)||null,capacity:a(V),status:a(j)||null,tags:a(Q).split(",").map(v=>v.trim()).filter(Boolean)}),sa(),await oa()}catch(v){o(F,v instanceof Error?v.message:"Failed to create asset",!0)}}function ga(i){if(!i)return"";switch(i.toLowerCase()){case"available":return"status-available";case"in_use":return"status-in-use";case"unavailable":return"status-unavailable";default:return""}}var ra=Ya();Ma("9662h2",i=>{Ea(()=>{$a.title="Assets - Community Resilience"})});var ia=s(ra),va=s(ia),la=e(s(va),2);la.__click=()=>{sa(),o(D,!a(D))};var ya=s(la,!0);t(la),t(va),pa(2),t(ia);var na=e(ia,2);{var xa=i=>{var v=Ra(),x=s(v,!0);t(v),y(()=>f(x,a(F))),c(i,v)};h(na,i=>{a(F)&&i(xa)})}var ca=e(na,2);{var Aa=i=>{var v=Ua(),x=e(s(v),2),N=s(x),E=s(N),m=e(s(E),2);aa(m),t(E);var b=e(E,2),$=e(s(b),2),n=s($);n.value=n.__value="";var A=e(n);A.value=A.__value="shelter";var w=e(A);w.value=w.__value="vehicle";var C=e(w);C.value=C.__value="equipment";var B=e(C);B.value=B.__value="supplies";var H=e(B);H.value=H.__value="facility";var W=e(H);W.value=W.__value="other",t($),t(b),t(N);var S=e(N,2),X=e(s(S),2);Ba(X),t(S);var T=e(S,2),I=s(T),k=e(s(I),2);aa(k),t(I);var L=e(I,2),Y=e(s(L),2);aa(Y),t(L),t(T);var M=e(T,2),O=s(M),R=e(s(O),2),U=s(R);U.value=U.__value="";var l=e(U);l.value=l.__value="available";var r=e(l);r.value=r.__value="in_use";var u=e(r);u.value=u.__value="unavailable",t(R),t(O);var q=e(O,2),g=e(s(q),2);aa(g),t(q),t(M);var Z=e(M,2),Fa=s(Z);Fa.__click=sa,pa(2),t(Z),t(x),t(v),La("submit",x,ba),z(m,()=>a(G),p=>o(G,p)),ma($,()=>a(J),p=>o(J,p)),z(X,()=>a(K),p=>o(K,p)),z(k,()=>a(P),p=>o(P,p)),z(Y,()=>a(V),p=>o(V,p)),ma(R,()=>a(j),p=>o(j,p)),z(g,()=>a(Q),p=>o(Q,p)),c(i,v)};h(ca,i=>{a(D)&&i(Aa)})}var wa=e(ca,2);{var Ca=i=>{var v=za();c(i,v)},Sa=i=>{var v=Ta(),x=Ha(v);{var N=m=>{var b=Ga();c(m,b)},E=m=>{var b=Xa();ua(b,21,()=>a(ea),_a,($,n)=>{var A=Wa(),w=s(A),C=s(w),B=s(C,!0);t(C);var H=e(C,2);{var W=l=>{var r=Ja(),u=s(r,!0);t(r),y((q,g)=>{Oa(r,1,`badge ${q??""}`,"svelte-9662h2"),f(u,g)},[()=>ga(a(n).status),()=>a(n).status.replace("_"," ")]),c(l,r)};h(H,l=>{a(n).status&&l(W)})}t(w);var S=e(w,2),X=s(S,!0);t(S);var T=e(S,2);{var I=l=>{var r=Ka(),u=s(r,!0);t(r),y(()=>f(u,a(n).description)),c(l,r)};h(T,l=>{a(n).description&&l(I)})}var k=e(T,2),L=s(k);{var Y=l=>{var r=Pa(),u=s(r);t(r),y(()=>f(u,`ðŸ“ ${a(n).location??""}`)),c(l,r)};h(L,l=>{a(n).location&&l(Y)})}var M=e(L,2);{var O=l=>{var r=Va(),u=s(r);t(r),y(()=>f(u,`ðŸ‘¥ Capacity: ${a(n).capacity??""}`)),c(l,r)};h(M,l=>{a(n).capacity&&l(O)})}t(k);var R=e(k,2);{var U=l=>{var r=Qa();ua(r,21,()=>a(n).tags,_a,(u,q)=>{var g=ja(),Z=s(g,!0);t(g),y(()=>f(Z,a(q))),c(u,g)}),t(r),c(l,r)};h(R,l=>{var r;(r=a(n).tags)!=null&&r.length&&l(U)})}t(A),y(()=>{f(B,a(n).name),f(X,a(n).asset_type)}),c($,A)}),t(b),c(m,b)};h(x,m=>{a(ea).length===0?m(N):m(E,!1)},!0)}c(i,v)};h(wa,i=>{a(ta)?i(Ca):i(Sa,!1)})}t(ra),y(()=>f(ya,a(D)?"Cancel":"Add Asset")),c(fa,ra),Na()}Ia(["click"]);export{ve as component};
