import{h as S,j as R,U as le,u as J,f as de,d as ie,B as ee,r as ve,H as ce,g as ae,k as P,w as D,V as se,W as ge,X as re,c as x,v as V,y as he,Y as _e,i as Ee,Z as U,_ as me,a0 as ne,a1 as pe,a2 as Se,a3 as Te,a4 as w,m as te,o as ue,a5 as $,a6 as we,n as ye,q as be,a7 as z,a8 as oe,a9 as Ae,aa as Oe,l as ke,ab as Ne,T as Ce,ac as Ie,p as He}from"./xmsiYLBb.js";function Fe(e,r){return r}function xe(e,r,f){for(var u=[],d=r.length,n,t=r.length,v=0;v<d;v++){let m=r[v];ue(m,()=>{if(n){if(n.pending.delete(m),n.done.add(m),n.pending.size===0){var c=e.outrogroups;B(U(n.done)),c.delete(n),c.size===0&&(e.outrogroups=null)}}else t-=1},!1)}if(t===0){var l=u.length===0&&f!==null;if(l){var o=f,i=o.parentNode;we(i),i.append(o),e.items.clear()}B(r,!l)}else n={pending:new Set(r),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(n)}function B(e,r=!0){for(var f=0;f<e.length;f++)ye(e[f],r)}var fe;function qe(e,r,f,u,d,n=null){var t=e,v=new Map,l=(r&oe)!==0;if(l){var o=e;t=S?R(le(o)):o.appendChild(J())}S&&de();var i=null,m=_e(()=>{var s=f();return Ee(s)?s:s==null?[]:U(s)}),c,g=!0;function b(){a.fallback=i,De(a,c,t,r,u),i!==null&&(c.length===0?i.f&w?(i.f^=w,M(i,null,t)):te(i):ue(i,()=>{i=null}))}var k=ie(()=>{c=ee(m);var s=c.length;let N=!1;if(S){var C=ve(t)===ce;C!==(s===0)&&(t=ae(),R(t),P(!1),N=!0)}for(var p=new Set,A=x,I=he(),h=0;h<s;h+=1){S&&D.nodeType===se&&D.data===ge&&(t=D,N=!0,P(!1));var O=c[h],H=u(O,h),_=g?null:v.get(H);_?(_.v&&re(_.v,O),_.i&&re(_.i,h),I&&A.skipped_effects.delete(_.e)):(_=Me(v,g?t:fe??(fe=J()),O,H,h,d,r,f),g||(_.e.f|=w),v.set(H,_)),p.add(H)}if(s===0&&n&&!i&&(g?i=V(()=>n(t)):(i=V(()=>n(fe??(fe=J()))),i.f|=w)),S&&s>0&&R(ae()),!g)if(I){for(const[F,q]of v)p.has(F)||A.skipped_effects.add(q.e);A.oncommit(b),A.ondiscard(()=>{})}else b();N&&P(!0),ee(m)}),a={effect:k,items:v,outrogroups:null,fallback:i};g=!1,S&&(t=D)}function De(e,r,f,u,d){var _,F,q,Y,W,X,Z,G,Q;var n=(u&Ae)!==0,t=r.length,v=e.items,l=e.effect.first,o,i=null,m,c=[],g=[],b,k,a,s;if(n)for(s=0;s<t;s+=1)b=r[s],k=d(b,s),a=v.get(k).e,a.f&w||((F=(_=a.nodes)==null?void 0:_.a)==null||F.measure(),(m??(m=new Set)).add(a));for(s=0;s<t;s+=1){if(b=r[s],k=d(b,s),a=v.get(k).e,e.outrogroups!==null)for(const T of e.outrogroups)T.pending.delete(a),T.done.delete(a);if(a.f&w)if(a.f^=w,a===l)M(a,null,f);else{var N=i?i.next:l;a===e.effect.last&&(e.effect.last=a.prev),a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),y(e,i,a),y(e,a,N),M(a,N,f),i=a,c=[],g=[],l=i.next;continue}if(a.f&$&&(te(a),n&&((Y=(q=a.nodes)==null?void 0:q.a)==null||Y.unfix(),(m??(m=new Set)).delete(a))),a!==l){if(o!==void 0&&o.has(a)){if(c.length<g.length){var C=g[0],p;i=C.prev;var A=c[0],I=c[c.length-1];for(p=0;p<c.length;p+=1)M(c[p],C,f);for(p=0;p<g.length;p+=1)o.delete(g[p]);y(e,A.prev,I.next),y(e,i,A),y(e,I,C),l=C,i=I,s-=1,c=[],g=[]}else o.delete(a),M(a,l,f),y(e,a.prev,a.next),y(e,a,i===null?e.effect.first:i.next),y(e,i,a),i=a;continue}for(c=[],g=[];l!==null&&l!==a;)(o??(o=new Set)).add(l),g.push(l),l=l.next;if(l===null)continue}a.f&w||c.push(a),i=a,l=a.next}if(e.outrogroups!==null){for(const T of e.outrogroups)T.pending.size===0&&(B(U(T.done)),(W=e.outrogroups)==null||W.delete(T));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||o!==void 0){var h=[];if(o!==void 0)for(a of o)a.f&$||h.push(a);for(;l!==null;)!(l.f&$)&&l!==e.fallback&&h.push(l),l=l.next;var O=h.length;if(O>0){var H=u&oe&&t===0?f:null;if(n){for(s=0;s<O;s+=1)(Z=(X=h[s].nodes)==null?void 0:X.a)==null||Z.measure();for(s=0;s<O;s+=1)(Q=(G=h[s].nodes)==null?void 0:G.a)==null||Q.fix()}xe(e,h,H)}}n&&be(()=>{var T,j;if(m!==void 0)for(a of m)(j=(T=a.nodes)==null?void 0:T.a)==null||j.apply()})}function Me(e,r,f,u,d,n,t,v){var l=t&pe?t&Se?ne(f):Te(f,!1,!1):null,o=t&me?ne(d):null;return{v:l,i:o,e:V(()=>(n(r,l??f,o??d,v),()=>{e.delete(u)}))}}function M(e,r,f){if(e.nodes)for(var u=e.nodes.start,d=e.nodes.end,n=r&&!(r.f&w)?r.nodes.start:f;u!==null;){var t=z(u);if(n.before(u),u===d)return;u=t}}function y(e,r,f){r===null?e.effect.first=f:r.next=f,f===null?e.effect.last=r:f.prev=r}function Je(e,r){let f=null,u=S;var d;if(S){f=D;for(var n=le(document.head);n!==null&&(n.nodeType!==se||n.data!==e);)n=z(n);if(n===null)P(!1);else{var t=z(n);n.remove(),R(t)}}S||(d=document.head.appendChild(J()));try{ie(()=>r(d),Oe)}finally{u&&(P(!0),R(f))}}function $e(e,r,f=r){var u=new WeakSet;ke(e,"input",async d=>{var n=d?e.defaultValue:e.value;if(n=K(e)?L(n):n,f(n),x!==null&&u.add(x),await Ne(),n!==(n=r())){var t=e.selectionStart,v=e.selectionEnd,l=e.value.length;if(e.value=n??"",v!==null){var o=e.value.length;t===v&&v===l&&o>l?(e.selectionStart=o,e.selectionEnd=o):(e.selectionStart=t,e.selectionEnd=Math.min(v,o))}}}),(S&&e.defaultValue!==e.value||Ce(r)==null&&e.value)&&(f(K(e)?L(e.value):e.value),x!==null&&u.add(x)),Ie(()=>{var d=r();if(e===document.activeElement){var n=He??x;if(u.has(n))return}K(e)&&d===L(e.value)||e.type==="date"&&!d&&!e.value||d!==e.value&&(e.value=d??"")})}function K(e){var r=e.type;return r==="number"||r==="range"}function L(e){return e===""?null:+e}const Re="/api";async function E(e,r){const f=await fetch(`${Re}${e}`,{...r,headers:{"Content-Type":"application/json",...r==null?void 0:r.headers}});if(!f.ok){const u=await f.json().catch(()=>({detail:"Request failed"}));throw new Error(u.detail||`HTTP ${f.status}`)}return f.json()}const Ke={query:e=>E("/query",{method:"POST",body:JSON.stringify({text:e})}),getKnowledge:()=>E("/knowledge"),getKnowledgeById:e=>E(`/knowledge/${e}`),createKnowledge:e=>E("/ingest",{method:"POST",body:JSON.stringify(e)}),updateKnowledge:(e,r)=>E(`/knowledge/${e}`,{method:"PUT",body:JSON.stringify(r)}),deleteKnowledge:e=>E(`/knowledge/${e}`,{method:"DELETE"}),submitFeedback:e=>E("/feedback",{method:"POST",body:JSON.stringify(e)}),getEvents:()=>E("/events"),createEvent:e=>E("/events",{method:"POST",body:JSON.stringify(e)}),getAssets:()=>E("/assets"),createAsset:e=>E("/assets",{method:"POST",body:JSON.stringify(e)}),getHealth:()=>E("/health")};export{Ke as a,$e as b,qe as e,Je as h,Fe as i};
