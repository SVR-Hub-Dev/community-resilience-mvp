import{a as d,f as _,c as we}from"../chunks/deXkMWSk.js";import{o as Ee}from"../chunks/BKIXhqgW.js";import{z as Se,K as f,P as Ce,J as s,B as t,A as D,C as Re,e as De,D as e,$ as Fe,F as o,I as a,M as ie,G as $e,O as Be}from"../chunks/xmsiYLBb.js";import{d as ke,s as g,e as Me}from"../chunks/BjJ1wdql.js";import{i as E}from"../chunks/Iv35OxqL.js";import{h as Te,a as ve,b as X,e as Le,i as Ne}from"../chunks/BqvhUv_W.js";import{r as le}from"../chunks/Dye65HWv.js";import{s as ne}from"../chunks/CvX7yBP0.js";import{b as de}from"../chunks/dZlrZmzD.js";var Oe=_('<div class="alert alert-error"> </div>'),Pe=_('<div class="card form-card svelte-13hsgdq"><h2 class="svelte-13hsgdq">Report New Event</h2> <form><div class="form-row svelte-13hsgdq"><div class="form-group svelte-13hsgdq"><label class="label" for="eventType">Event Type *</label> <select id="eventType" class="input svelte-13hsgdq" required><option>Select type...</option><option>Flood</option><option>Road Closure</option><option>Power Outage</option><option>Evacuation</option><option>Rescue Needed</option><option>Shelter Update</option><option>Other</option></select></div> <div class="form-group svelte-13hsgdq"><label class="label" for="severity">Severity (1-5)</label> <select id="severity" class="input svelte-13hsgdq"><option>Select severity...</option><option>1 - Minor</option><option>2 - Low</option><option>3 - Moderate</option><option>4 - High</option><option>5 - Critical</option></select></div></div> <div class="form-group svelte-13hsgdq"><label class="label" for="description">Description *</label> <textarea id="description" class="textarea" required placeholder="Describe the situation..."></textarea></div> <div class="form-row svelte-13hsgdq"><div class="form-group svelte-13hsgdq"><label class="label" for="location">Location</label> <input id="location" class="input" placeholder="Where is this happening?"/></div> <div class="form-group svelte-13hsgdq"><label class="label" for="reportedBy">Reported By</label> <input id="reportedBy" class="input" placeholder="Your name (optional)"/></div></div> <div class="form-actions svelte-13hsgdq"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary">Submit Report</button></div></form></div>'),ze=_('<div class="loading"><div class="spinner"></div></div>'),Ae=_('<div class="card empty-state svelte-13hsgdq"><p>No events reported yet.</p></div>'),Ge=_("<span> </span>"),He=_("<span> </span>"),Ie=_("<span> </span>"),Je=_('<div><div class="event-header svelte-13hsgdq"><span class="event-type svelte-13hsgdq"> </span> <!></div> <p class="event-description svelte-13hsgdq"> </p> <div class="event-meta svelte-13hsgdq"><!> <span> </span> <!></div></div>'),Ke=_('<div class="events-list svelte-13hsgdq"></div>'),Ue=_('<div class="container"><div class="page-header svelte-13hsgdq"><div class="header-row svelte-13hsgdq"><h1 class="svelte-13hsgdq">Community Events</h1> <button class="btn btn-primary"> </button></div> <p class="svelte-13hsgdq">Real-time reports from the community during emergencies.</p></div> <!> <!> <!></div>');function at(pe,ce){Se(ce,!0);let U=f(Ce([])),W=f(!0),S=f(""),F=f(!1),O=f(""),P=f(""),z=f(""),A=f(null),G=f("");Ee(async()=>{await Z()});async function Z(){s(W,!0),s(S,"");try{s(U,await ve.getEvents(),!0)}catch(r){s(S,r instanceof Error?r.message:"Failed to load events",!0)}finally{s(W,!1)}}function Y(){s(O,""),s(P,""),s(z,""),s(A,null),s(G,""),s(F,!1)}async function _e(r){r.preventDefault(),s(S,"");try{await ve.createEvent({event_type:t(O),description:t(P),location:t(z)||null,severity:t(A),reported_by:t(G)||null}),Y(),await Z()}catch(n){s(S,n instanceof Error?n.message:"Failed to create event",!0)}}function ue(r){return r?r>=4?"severity-high":r>=2?"severity-medium":"severity-low":""}function me(r){return new Date(r).toLocaleString()}var j=Ue();Te("13hsgdq",r=>{De(()=>{Fe.title="Events - Community Resilience"})});var Q=o(j),ee=o(Q),V=e(o(ee),2);V.__click=()=>{Y(),s(F,!t(F))};var fe=o(V,!0);a(V),a(ee),ie(2),a(Q);var te=e(Q,2);{var he=r=>{var n=Oe(),y=o(n,!0);a(n),D(()=>g(y,t(S))),d(r,n)};E(te,r=>{t(S)&&r(he)})}var ae=e(te,2);{var ge=r=>{var n=Pe(),y=e(o(n),2),$=o(y),B=o($),p=e(o(B),2),u=o(p);u.value=u.__value="";var k=e(u);k.value=k.__value="flood";var l=e(k);l.value=l.__value="road_closure";var h=e(l);h.value=h.__value="power_outage";var b=e(h);b.value=b.__value="evacuation";var q=e(b);q.value=q.__value="rescue";var M=e(q);M.value=M.__value="shelter";var H=e(M);H.value=H.__value="other",a(p),a(B);var I=e(B,2),x=e(o(I),2),T=o(x);T.value=(T.__value=null)??"";var C=e(T);C.value=C.__value=1;var R=e(C);R.value=R.__value=2;var L=e(R);L.value=L.__value=3;var w=e(L);w.value=w.__value=4;var J=e(w);J.value=J.__value=5,a(x),a(I),a($);var N=e($,2),K=e(o(N),2);$e(K),a(N);var v=e(N,2),i=o(v),c=e(o(i),2);le(c),a(i);var re=e(i,2),oe=e(o(re),2);le(oe),a(re),a(v);var se=e(v,2),xe=o(se);xe.__click=Y,ie(2),a(se),a(y),a(n),Me("submit",y,_e),de(p,()=>t(O),m=>s(O,m)),de(x,()=>t(A),m=>s(A,m)),X(K,()=>t(P),m=>s(P,m)),X(c,()=>t(z),m=>s(z,m)),X(oe,()=>t(G),m=>s(G,m)),d(r,n)};E(ae,r=>{t(F)&&r(ge)})}var ye=e(ae,2);{var be=r=>{var n=ze();d(r,n)},qe=r=>{var n=we(),y=Be(n);{var $=p=>{var u=Ae();d(p,u)},B=p=>{var u=Ke();Le(u,21,()=>t(U),Ne,(k,l)=>{var h=Je(),b=o(h),q=o(b),M=o(q,!0);a(q);var H=e(q,2);{var I=v=>{var i=Ge(),c=o(i);a(i),D(()=>{ne(i,1,`badge ${t(l).severity>=4?"badge-danger":t(l).severity>=2?"badge-warning":"badge-primary"}`),g(c,`Severity: ${t(l).severity??""}`)}),d(v,i)};E(H,v=>{t(l).severity&&v(I)})}a(b);var x=e(b,2),T=o(x,!0);a(x);var C=e(x,2),R=o(C);{var L=v=>{var i=He(),c=o(i);a(i),D(()=>g(c,`ðŸ“ ${t(l).location??""}`)),d(v,i)};E(R,v=>{t(l).location&&v(L)})}var w=e(R,2),J=o(w);a(w);var N=e(w,2);{var K=v=>{var i=Ie(),c=o(i);a(i),D(()=>g(c,`ðŸ‘¤ ${t(l).reported_by??""}`)),d(v,i)};E(N,v=>{t(l).reported_by&&v(K)})}a(C),a(h),D((v,i,c)=>{ne(h,1,`card event-card ${v??""}`,"svelte-13hsgdq"),g(M,i),g(T,t(l).description),g(J,`ðŸ• ${c??""}`)},[()=>ue(t(l).severity),()=>t(l).event_type.replace("_"," "),()=>me(t(l).timestamp)]),d(k,h)}),a(u),d(p,u)};E(y,p=>{t(U).length===0?p($):p(B,!1)},!0)}d(r,n)};E(ye,r=>{t(W)?r(be):r(qe,!1)})}a(j),D(()=>g(fe,t(F)?"Cancel":"Report Event")),d(pe,j),Re()}ke(["click"]);export{at as component};
